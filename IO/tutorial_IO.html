<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="generator" content="MATLAB R2016a"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><title>IO Tutorial </title><style type="text/css">
* {margin: 0; padding: 0;}
body {text-align: start; line-height: 17.234001159668px; min-height: 0px; white-space: normal; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Menlo, monospace; font-style: normal; font-size: 14px; font-weight: normal; text-decoration: none; white-space: normal; }
h1, h2 {font-weight: normal;}
.content { padding: 30px; }

.S0 { margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S1 { line-height: 26.3999977111816px; min-height: 24px; white-space: pre-wrap; color: rgb(213, 80, 0); font-family: Helvetica, Arial, sans-serif; font-size: 21.9999980926514px; white-space: pre-wrap; margin-left: 4px; margin-top: 3px; margin-bottom: 15px; margin-right: 10px;  }
.S2 { min-height: 0px; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S3 { line-height: 20.5759983062744px; min-height: 20px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-size: 16px; font-weight: bold; white-space: pre-wrap; margin-left: 4px; margin-top: 15px; margin-bottom: 9px; margin-right: 10px;  }
.S4 { line-height: 21px; min-height: 17px; white-space: pre-wrap; font-family: Helvetica, Arial, sans-serif; white-space: pre-wrap; margin-left: 4px; margin-top: 2px; margin-bottom: 9px; margin-right: 10px;  }
.S5 { min-height: 0px; font-family: monospace; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S6 { min-height: 0px; color: rgb(0, 95, 206); margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S7 { font-family: Helvetica, Arial, sans-serif; margin-left: 0px; margin-top: 10px; margin-bottom: 20px; margin-right: 0px;  }
.S8 { text-align: left; line-height: 21px; white-space: pre-wrap; white-space: pre-wrap; margin-left: 56px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S9 { line-height: 20.5759983062744px; min-height: 20px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-size: 16px; font-weight: bold; white-space: pre-wrap; margin-left: 4px; margin-top: 3px; margin-bottom: 9px; margin-right: 10px;  }
.S10 { margin-left: 3px; margin-top: 10px; margin-bottom: 4px; margin-right: 3px;  }
.S11 { line-height: 15.5926675796509px; min-height: 18px; white-space: nowrap; font-size: 12.6666669845581px; white-space: nowrap; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S12 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S13 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; color: rgb(160, 32, 240); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S14 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 45px;  }
.S15 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; color: rgb(34, 139, 34); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 45px;  }
.S16 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; color: rgb(0, 0, 255); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 45px;  }
.S17 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; color: rgb(160, 32, 240); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 45px;  }
.S18 { color: rgb(64, 64, 64); margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S19 { margin-left: 3px; margin-top: 10px; margin-bottom: 10px; margin-right: 3px;  }
.S20 { line-height: 21px; min-height: 17px; white-space: pre-wrap; font-family: Helvetica, Arial, sans-serif; white-space: pre-wrap; margin-left: 4px; margin-top: 10px; margin-bottom: 9px; margin-right: 10px;  }
.S21 { margin-left: 3px; margin-top: 4px; margin-bottom: 10px; margin-right: 3px;  }
.S22 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; color: rgb(0, 0, 255); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S23 { font-family: monospace; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }

.LineNodeBlock {margin: 10px 0 10px 0;}
.LineNodeBlock+.paragraphNode {margin-top: 10px;}
.lineNode {padding-left: 10px; background-color: #F7F7F7; border-left: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}
.inlineWrapper:first-child .lineNode,.inlineWrapper.outputs+.inlineWrapper .lineNode {padding-top: 5px; border-top: 1px solid #E9E9E9;}
.inlineWrapper:last-child .lineNode,.inlineWrapper.outputs .lineNode {padding-bottom: 5px; border-bottom: 1px solid #E9E9E9;}
.lineNode .textBox {white-space: pre;}
.outputGroup {margin: 2px 0 2px 0; padding: 2px 2px 2px 4px;}
.outputRegion {}
.outputParagraph {color: rgba(64, 64, 64, 1); padding: 10px 0 6px 17px; background: white; overflow-x: hidden;}
.inlineWrapper:last-child .outputParagraph {border-bottom-left-radius: 4px; border-bottom-right-radius: 4px;}
.outputParagraph:empty {margin: 0;}
.inlineElement .symbolicElement {margin-top: 1px; margin-bottom: 1px;}
.embeddedOutputsSymbolicElement .MathEquation {margin-top: 4px; margin-bottom: 4px;}
.embeddedOutputsSymbolicElement .MathEquation.displaySymbolicElement {margin-left: 15px;}
.embeddedOutputsSymbolicElement .MathEquation.inlineSymbolicElement {margin-left: 5px;}
.embeddedOutputsSymbolicElement {overflow-x: auto; overflow-y: hidden;}
.embeddedOutputsSymbolicElement { overflow: initial !important;}
.embeddedOutputsTextElement,.embeddedOutputsVariableStringElement {font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px; white-space: pre; word-wrap: initial; min-height: 18px; max-height: 250px; overflow: auto;}
.textElement {padding-top: 3px;}
.embeddedOutputsTextElement.inlineElement,.embeddedOutputsVariableStringElement.inlineElement {}
.inlineElement .textElement {}
.embeddedOutputsTextElement,.embeddedOutputsVariableStringElement { max-height: none !important; overflow: initial !important;}
.veSpecifier {}
.veContainer {}
.veSpecifierBox {height: 400px; width: 500px;}
.veSpecifier .veTable {padding-top: 3px; padding-bottom: 4px;}
.veSpecifierBox .veSpecifier .veContainer {position: relative; width: 100%; height: 370px;}
.veSpecifierBox .dijitDialogPaneContent {width: 97% !important; height: 88% !important;}
.veSpecifier .veTable .rowHeadersWrapper {padding-bottom: 0;}
.veSpecifier .veTable .scroller .variableEditorRenderers {padding-right: 3px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;}
.veVariableValueSummary {display: inline-block;}
.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper {visibility: hidden; z-index: 0;}
.veMetaSummary {font-style: italic;}
.veSpecifier .veTable .scroller {overflow: hidden;}
.veSpecifier .veTable:hover .scroller {overflow: auto;}
.veSpecifier .veVariableName,.veSpecifier .veDimensionFont {font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px;}
.veSpecifier .veVariableName {padding-top: 2px;}
.veSpecifier .veDimensionFont {font-style: italic; color: #9A9A9A;}
.veSpecifier .scroller::-webkit-scrollbar-track {background-color: white;}
.veSpecifier .scroller::-webkit-scrollbar-corner {background-color: white;}
.veSpecifier .veTable .topRowHeaderWrapper {border: none; background-color: #F8F9FA;}
.veSpecifier .mw_type_ListBase.showCellBorders,.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper,.veSpecifier .veTable .verticalScrollSpacer,.veSpecifier .veTable .horizontalScrollSpacer {border: none;}
.veSpecifier .veTable .dataScrollerNode {border: 1px solid #BFBFBF;}
.veSpecifier .veTable .columnHeaderNode,.veSpecifier .veTable .rowHeaderNode,.veSpecifier .veTable .dataBody {font-family: Arial; font-size: 13px;}
.veSpecifier .veTable .columnHeaderNode,.veSpecifier .veTable .rowHeaderNode {color: #7F7F7F;}
.veSpecifier .veTable .dataBody {color: #000000;}
.veSpecifier .veTable .columnHeaderNode .cell .drag,.veSpecifier .veTable .columnHeaderNode .cell .header,.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper {background-color: #F8F9FA;}
.veSpecifier .veTable .columnHeaderNode .cell .dragBorder {border-right: 1px solid #F8F9FA;}
.veSpecifier .veTable .rowHeaderNode .cell {padding-top: 3px; text-align: center; border-bottom: 1px solid #F8F9FA;}
.veSpecifier .veTable .dataBody .cell .plainText {text-align: right;}
.veSpecifier .veTable .dataBody .row .cell {border-bottom: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}
.embeddedOutputsVariableElement {font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px; white-space: pre-wrap; word-wrap: break-word; min-height: 18px; max-height: 250px; overflow: auto;}
.variableElement {}
.embeddedOutputsVariableElement.inlineElement {}
.inlineElement .variableElement {}
.variableValue { width: 100% !important; }
.embeddedOutputsMatrixElement {min-height: 18px; box-sizing: border-box; font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px;}
.embeddedOutputsMatrixElement .matrixElement{position: relative;}
.matrixElement .variableValue {white-space: pre; display: inline-block; vertical-align: top; overflow: hidden;}
.embeddedOutputsMatrixElement.inlineElement {}
.embeddedOutputsMatrixElement.inlineElement .topHeaderWrapper {display: none;}
.embeddedOutputsMatrixElement.inlineElement .veTable .body {padding-top: 0 !important; max-height: 100px;}
.embeddedOutputsMatrixElement.inlineElement .veVariableName {padding-top: 0;}
.inlineElement .matrixElement {max-height: 300px;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer {white-space: nowrap; padding-top: 10px; margin-bottom: 3px;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer .horizontalEllipsis.hide,.embeddedOutputsMatrixElement .matrixElement .verticalEllipsis.hide {display: none;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer .horizontalEllipsis {margin-bottom: -3px;}
.matrixElement { max-height: none !important; }
.dijitTooltipDialog .dijitTooltipContainer .dijitTooltipContents .alertPlugin-alertMessage {min-width: 12px; max-width: 400px; max-height: 300px; overflow: auto;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar {width: 11px; height: 11px;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-track {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-corner {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb {border-radius: 7px; background-color: rgba(0, 0, 0, 0.1); border: 2px solid rgba(0, 0, 0, 0); background-clip: padding-box;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb:hover {background-color: rgba(0, 0, 0, 0.2);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage:hover::-webkit-scrollbar-thumb {background-color: rgba(0, 0, 0, 0.1);}
.dijitTooltipDialog .alertPlugin-alertMessage:hover::-webkit-scrollbar-thumb:hover {background-color: rgba(0, 0, 0, 0.2);}
.alertPlugin-alertLine {position: absolute; display: initial; width: 40px; text-align: right; cursor: text;}
.alertPlugin-onTextLine {visibility: hidden;}
.alertPlugin-hasTooltip .alertPlugin-warningImg,.alertPlugin-hasTooltip .alertPlugin-errorImg {cursor: pointer;}
.alertPlugin-alertLine .alertPlugin-warningElement,.alertPlugin-alertLine .alertPlugin-errorElement {display: inline-block; margin-right: 4px;}
.alertPlugin-isStale {-webkit-filter: opacity(0.4) grayscale(80%); filter: opacity(0.4) grayscale(80%);}
.diagnosticMessage-wrapper {font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px;}
.diagnosticMessage-wrapper.diagnosticMessage-warningType {color: rgb(255,100,0);}
.diagnosticMessage-wrapper.diagnosticMessage-warningType a {color: rgb(255,100,0); text-decoration: underline;}
.diagnosticMessage-wrapper.diagnosticMessage-errorType {color: rgb(230,0,0);}
.diagnosticMessage-wrapper.diagnosticMessage-errorType a {color: rgb(230,0,0); text-decoration: underline;}
.diagnosticMessage-wrapper .diagnosticMessage-messagePart {white-space: pre-wrap;}
.diagnosticMessage-wrapper .diagnosticMessage-stackPart {white-space: pre;}
.embeddedOutputsWarningElement{min-height: 18px; max-height: 250px; overflow: auto;}
.embeddedOutputsWarningElement.inlineElement {}
.embeddedOutputsErrorElement {min-height: 18px; max-height: 250px; overflow: auto;}
.embeddedOutputsErrorElement.inlineElement {}
</style></head><body><div class = "content"><div class = 'SectionBlock containment active'><h1 class = "S1"><span class = "S2">IO Tutorial </span></h1><h2 class = "S3"><span class = "S2">Author(s): Thomas Pfau, University of Luxembourg</span></h2><h2 class = "S3"><span class = "S2">Reviewers: </span></h2><h2 class = "S3"><span class = "S2">INTRODUCTION</span></h2><p class = "S4"><span class = "S2">This tutorial aims at providing information on how to load models into The COBRA Toolbox and export them to other formats.</span></p><h2 class = "S3"><span class = "S2">Available input formats</span></h2><p class = "S4"><span class = "S2">The COBRA Toolbox supports the use of models in multiple formats. Internally, it uses a simple MATLAB </span><span class = "S5">struct</span><span class = "S2"> with fields defined in the </span><a href = 'https://opencobra.github.io/cobratoolbox/docs/COBRAModelFields.html'><span class = "S0">Documentation</span></a><span class = "S2">. These models are commonly provided in a </span><span class = "S5">.mat</span><span class = "S2"> file.</span></p><p class = "S4"><span class = "S2">There are additional model formats for which io functions exist in The COBRA Toolbox. These incluse</span></p><ul class = "S7"><li class = "S8"><span class = "S0">Models in SBML Format </span></li><li class = "S8"><span class = "S0">Models in SimPheny format</span></li><li class = "S8"><span class = "S0">Models in an Excel Format</span></li></ul><h2 class = "S3"><span class = "S2">MATLAB save files:</span></h2><p class = "S4"><span class = "S2">The format of a model struct provided in a </span><span class = "S5">.mat</span><span class = "S2"> file has to stick to the rules defined in the </span><a href = 'https://opencobra.github.io/cobratoolbox/docs/ExcelModelFileDefinition.html'><span class = "S0">Documentation</span></a><span class = "S2">. </span></p><h2 class = "S3"><span class = "S2">SBML Format</span></h2><p class = "S4"><span class = "S2">The COBRA Toolbox currently supports SBML models provided as Level 3 version 1 (as defined </span><a href = 'http://sbml.org/Documents/Specifications'><span class = "S0">here</span></a><span class = "S2">) and has legacy support for older versions of SBML. It also supports the Level 3 FBC package (both in version 1 and version 2). </span></p><p class = "S4"><span class = "S2">The COBRA Toolbox will use the provided SBML IDs as IDs for the respective elements of the model structure, and use the name fields as names. It is assumed (but not necessary), that metabolite IDs start with a "M_", reaction ids start with a "R_" ,  gene ids start with a "G_" and compartment ids start with a "C_". This is due to the limitation on identifiers in SBML and those starting sequences will be removed if they are consistently present in the model. Since metabolites in The COBRA Toolbox model </span><span class = "S5">struct</span><span class = "S2"> are commonly provided with a metabolite ID followed by a compartment identifier e.g. ('ala_L[c]'), and brackets are illegal characters for an SBML ID. It is assumed, that if all non boundary species have a trailing compartment identifier preceded by a underscore (e.g. SBML ID: M_ala_L_c) those identifiers should be converted to model compartment identifiers.</span></p><p class = "S4"><span class = "S2">The COBRA Toolbox has a legacy support for the NOTE Fields defined in </span><a href = 'http://www.nature.com/nprot/journal/v6/n9/abs/nprot.2011.308.html'><span class = "S0">Schellenberger et al, Nature Protocols, 2011</span></a><span class = "S2">, but it is suggested to instead use annotations whenever possible. In general, if a fbc-package field and a NOTES field is present, the fbc-package value will be used (e.g. CHARGE for metabolites, or GENE_ASSOCIATION for reactions). The same applies to annotations, i.e. if there is an annotation for an EC number, the Notes field EC Number will be ignored. However, the charge field in SBML Level 2 will be overwritten by the Notes field definitions.</span></p><p class = "S4"><span class = "S2"></span></p><h2 class = "S3"><span class = "S2">SimPheny Format</span></h2><p class = "S4"><span class = "S2">SimPheny models provide their models in 3 or 4 files (4 if GPR rules are provided). The model identifiers will be used as presented in the SimPheny files.</span></p><p class = "S4"><span class = "S2"></span></p><h2 class = "S3"><span class = "S2">Excel Format</span></h2><p class = "S4"><span class = "S2">Excel files adhereing to the COBRA xls specifications listed in the </span><a href = 'https://opencobra.github.io/cobratoolbox/docs/ExcelModelFileDefinition.html'><span class = "S0">Documentation</span></a><span class = "S2">. Parseable Excel models contain two sheets for reactions and metabolites respectively.</span></p><p class = "S4"><span class = "S2"></span></p></div><p class = "S0"></p><div class = 'SectionBlock containment'><h2 class = "S9"><span class = "S2">Available output formats</span></h2><p class = "S4"><span class = "S2">The COBRA Toolbox also allows storage in multiple file types as detailed below:</span></p><h2 class = "S3"><span class = "S2">MATLAB </span><span class = "S5">.mat</span><span class = "S2"> files</span></h2><p class = "S4"><span class = "S2">This format is simply the model being saved as a MATLAB save file, and is the default save method. It has the advantage of lossless data storage even for model specific fields not supported by The COBRA Toolbox.</span></p><h2 class = "S3"><span class = "S2">SBML format (</span><span class = "S5">.xml</span><span class = "S2">)</span></h2><p class = "S4"><span class = "S2">The systems biology markup language (SBML) is a very common format to store biological models. The COBRA Toolbox allows generation of models using Level 3 Version 1 and uses the fbc-package extension to encode constraint based properties. This is the format that is recommended for publication, as it can be used by many different tools and allows the best use of the model.</span></p><h2 class = "S3"><span class = "S2">Excel format</span></h2><p class = "S4"><span class = "S2">Historically, models were often exchanged using Excel files, and this is still in use today. Some users prefer to get an overview over a model using Excel, since it provides a general overview at a first glance. The COBRA Toolbox offers an Excel export using the format described in the Documentation (see above).</span></p><h2 class = "S3"><span class = "S2">Text Format</span></h2><p class = "S4"><span class = "S2">Finally The COBRA Toolbox offers a simple textual export, which is essentially a tab separated file containing the reactions with their reaction formulas along with the associated GPRs, but no further information. This format only uses the required fields and will ignore any optional fields.</span></p><p class = "S4"><span class = "S2"></span></p><h2 class = "S3"><span class = "S2">MATERIALS</span></h2><p class = "S4"><span class = "S2">We will use two model files for this tutorial, one MATLAB </span><span class = "S5">.mat</span><span class = "S2"> file and an </span><span class = "S5">.xml</span><span class = "S2"> file stored in SBML format. The following code loads these files into the tutorial directory (cleaning any old copies).</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">cd(fileparts(which(</span><span class = "S13">'tutorial_IO.mlx'</span><span class = "S14">)));</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S14"></span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S15">% Copy two files that can be loaded (if they are nto yet present).</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S16">try</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    delete </span><span class = "S13">'ecoli_core_model.mat'</span><span class = "S14">;</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    delete </span><span class = "S17">'Abiotrophia_defectiva_ATCC_49176.xml'</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    copyfile(which(</span><span class = "S13">'ecoli_core_model.mat'</span><span class = "S12">), </span><span class = "S13">'.'</span><span class = "S14">);</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    copyfile(which(</span><span class = "S13">'Abiotrophia_defectiva_ATCC_49176.xml'</span><span class = "S12">), </span><span class = "S13">'.'</span><span class = "S14">);</span></p></div><div class = 'inlineWrapper outputs'><p class = "S11 lineNode"><span class = "S16">end</span></p><div class="outputParagraph"><div class="inlineElement embeddedOutputsWarningElement" uid="E1220E18" data-testid="output_0" data-width="1595" style="width: 1625px;"><div class="diagnosticMessage-wrapper diagnosticMessage-warningType"><div class="diagnosticMessage-messagePart">Warning: File 'ecoli_core_model.mat' not found.</div><div class="diagnosticMessage-stackPart"></div></div></div><div class="inlineElement embeddedOutputsWarningElement" uid="221051D7" data-testid="output_1" data-width="1595" style="width: 1625px;"><div class="diagnosticMessage-wrapper diagnosticMessage-warningType"><div class="diagnosticMessage-messagePart">Warning: File 'Abiotrophia_defectiva_ATCC_49176.xml' not found.</div><div class="diagnosticMessage-stackPart"></div></div></div></div></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><h2 class = "S9"><span class = "S2">PROCEDURE</span></h2><p class = "S4"><span class = "S2">The time it takes to load a model depends on the file format and the complexity of a model. While </span><span class = "S5">.mat</span><span class = "S2"> file loading even for large models is a question of seconds, very large SBML files can take a few minutes to load depending on the machine. </span></p><h2 class = "S3"><span class = "S2">Reading a model (TIMING 1s to a few minutes)</span></h2><p class = "S4"><span class = "S2">The most straightforward way to import a model into the The COBRA Toolbox is to use the </span><span class = "S5">readCbModel</span><span class = "S2"> function. To e.g. load a model from a </span><span class = "S5">.mat</span><span class = "S2"> file, you can simply use the filename (with or without file extension). </span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">fileName = </span><span class = "S13">'ecoli_core_model'</span><span class = "S14">;</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S14">model = readCbModel(fileName);</span></p></div></div><p class = "S20"><span class = "S5">readCbModel</span><span class = "S2"> assumes, that .mat files are a MATLAB save file, </span><span class = "S5">.xml</span><span class = "S2"> files are models in SBML format, </span><span class = "S5">.sto</span><span class = "S2"> are SimPheny models, and </span><span class = "S5">.xls</span><span class = "S2"> or </span><span class = "S5">.xlsx</span><span class = "S2"> are models in Excel format.</span></p></div><p class = "S0"></p><div class = 'SectionBlock containment'><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S15">% This code is to avoid execution in non gui-environments</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S22">if </span><span class = "S12">usejava(</span><span class = "S13">'desktop'</span><span class = "S14">)</span></p></div></div><p class = "S20"><span class = "S2">You can also call the function without a fileName to get a file selection dialog   </span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S14">model = readCbModel();</span></p></div></div><p class = "S20"><span class = "S2">The model loaded in this way can directly be used with The COBRA Toolbox functions. You can view the data stored in the model by e.g. using</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">open </span><span class = "S17">model</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S14"></span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S15">% This code is to avoid execution in non gui-environments</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S16">end</span></p></div></div><p class = "S20"><span class = "S2"></span></p></div><p class = "S0"></p><div class = 'SectionBlock containment'><h2 class = "S9"><span class = "S2">Writing a model (TIMING: 1s to a few minutes)</span></h2><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S15">% This code is to avoid execution in non gui-environments</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S22">if </span><span class = "S12">usejava(</span><span class = "S13">'desktop'</span><span class = "S14">)</span></p></div></div><p class = "S20"><span class = "S2">To wr</span><span class = "S2">ite files, use the </span><span class = "S5">writeCbModel</span><span class = "S2"> function</span><span class = "S2">.</span><span class = "S2"> The function can be called directly with a model.</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S14">writeCbModel(model)</span></p></div></div><p class = "S20"><span class = "S2">This will call a file selection dialog, which allows the selection of a filename and, depending on the selected format from the dropdown, the output will be generated. </span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S15">% This code is to avoid execution in non gui-environments</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S16">end</span></p></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S15">% This code is to avoid execution in non gui-environments</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S22">if </span><span class = "S12">usejava(</span><span class = "S13">'desktop'</span><span class = "S14">)</span></p></div></div><p class = "S20"><span class = "S2">If no </span><span class = "S5">fileName</span><span class = "S2"> is p</span><span class = "S2">rovide</span><span class = "S2">d</span><span class = "S2">, a popup will ask you to provide a </span><span class = "S5">fileName</span><span class = "S2"> with the specified format. </span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">writeCbModel(model,</span><span class = "S13">'text'</span><span class = "S14">)</span></p></div></div><p class = "S20"><span class = "S2">The available format options are:</span></p><ul class = "S7"><li class = "S8"><span class = "S0">'</span><span class = "S23">mat' </span><span class = "S0">- for a MATLAB save file</span></li><li class = "S8"><span class = "S23">'sbml'</span><span class = "S0"> - for a SBML model</span></li><li class = "S8"><span class = "S23">'xls'</span><span class = "S0"> - for a model in Excel format</span></li><li class = "S8"><span class = "S23">'text'</span><span class = "S0"> - for a textual export.</span></li></ul><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S15">% This code is to avoid execution in non gui-environments</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S16">end</span></p></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><p class = "S4"><span class = "S2">It is also possible</span><span class = "S2"> to sp</span><span class = "S2">e</span><span class = "S2">cify the format and f</span><span class = "S2">i</span><span class = "S2">lename explicitly:</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper outputs'><p class = "S11 lineNode"><span class = "S12">writeCbModel(model, </span><span class = "S13">'SBML'</span><span class = "S12">, </span><span class = "S13">'Acidaminococcus.xml'</span><span class = "S14">)</span></p><div class="outputParagraph"><div class="inlineElement embeddedOutputsTextElement" uid="160AD7B6" data-testid="output_2" data-width="1595" style="width: 1625px;"><div class="textElement">Document written</div></div><div class="inlineElement embeddedOutputsVariableStringElement scrollableOutput" uid="15265CB7" data-testid="output_3" data-width="1595" style="width: 1625px;"><div class="textElement"><div>ans = </div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; constraint: [1×0 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp; functionDefinition: [1×0 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;event: [1×0 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rule: [1×0 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unitDefinition: [1×1 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initialAssignment: [1×0 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SBML_level: 3<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SBML_version: 1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; annotation: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;areaUnits: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;avogadro_symbol: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; conversionFactor: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; delay_symbol: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extentUnits: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;fbc_activeObjective: 'obj'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbc_version: 2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; id: 'COBRAModel'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lengthUnits: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; metaid: 'COBRAModel'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;notes: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sboTerm: -1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; substanceUnits: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeUnits: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time_symbol: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; typecode: 'SBML_MODEL'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;volumeUnits: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;species: [1×72 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compartment: [1×2 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameter: [1×5 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; reaction: [1×95 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbc_fluxBound: [1×2 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbc_geneProduct: [1×137 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbc_objective: [1×1 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; namespaces: [1×2 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fbc_strict: 1<br><br></div></div></div></div></div></div><p class = "S20"><span class = "S2">which will write the model to the file Acidaminococcus.xml.</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S15">% Some Cleanup </span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S14">currentDir = pwd;</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">cd(fileparts(which(</span><span class = "S13">'tutorial_IO.mlx'</span><span class = "S14">)));</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S14"></span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S15">% Copy two files that can be loaded (if they are nto yet present).</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S16">try</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    delete(</span><span class = "S13">'ecoli_core_model.mat'</span><span class = "S14">);</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    delete(</span><span class = "S13">'Abiotrophia_defectiva_ATCC_49176.xml'</span><span class = "S14">);</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    delete(</span><span class = "S13">'Acidaminococcus.xml'</span><span class = "S14">);</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S16">end</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S14">cd(currentDir)</span></p></div></div></div></div>
<!-- 
##### SOURCE BEGIN #####
%% IO Tutorial 
%% Author(s): Thomas Pfau, University of Luxembourg
%% Reviewers: 
%% INTRODUCTION
% This tutorial aims at providing information on how to load models into The 
% COBRA Toolbox and export them to other formats.
%% Available input formats
% The COBRA Toolbox supports the use of models in multiple formats. Internally, 
% it uses a simple MATLAB |struct| with fields defined in the <https://opencobra.github.io/cobratoolbox/docs/COBRAModelFields.html 
% Documentation>. These models are commonly provided in a |.mat| file.
% 
% There are additional model formats for which io functions exist in The 
% COBRA Toolbox. These incluse
% 
% * Models in SBML Format 
% * Models in SimPheny format
% * Models in an Excel Format
%% MATLAB save files:
% The format of a model struct provided in a |.mat| file has to stick to the 
% rules defined in the <https://opencobra.github.io/cobratoolbox/docs/ExcelModelFileDefinition.html 
% Documentation>. 
%% SBML Format
% The COBRA Toolbox currently supports SBML models provided as Level 3 version 
% 1 (as defined <http://sbml.org/Documents/Specifications here>) and has legacy 
% support for older versions of SBML. It also supports the Level 3 FBC package 
% (both in version 1 and version 2). 
% 
% The COBRA Toolbox will use the provided SBML IDs as IDs for the respective 
% elements of the model structure, and use the name fields as names. It is assumed 
% (but not necessary), that metabolite IDs start with a "M_", reaction ids start 
% with a "R_" ,  gene ids start with a "G_" and compartment ids start with a "C_". 
% This is due to the limitation on identifiers in SBML and those starting sequences 
% will be removed if they are consistently present in the model. Since metabolites 
% in The COBRA Toolbox model |struct| are commonly provided with a metabolite 
% ID followed by a compartment identifier e.g. ('ala_L[c]'), and brackets are 
% illegal characters for an SBML ID. It is assumed, that if all non boundary species 
% have a trailing compartment identifier preceded by a underscore (e.g. SBML ID: 
% M_ala_L_c) those identifiers should be converted to model compartment identifiers.
% 
% The COBRA Toolbox has a legacy support for the NOTE Fields defined in <http://www.nature.com/nprot/journal/v6/n9/abs/nprot.2011.308.html 
% Schellenberger et al, Nature Protocols, 2011>, but it is suggested to instead 
% use annotations whenever possible. In general, if a fbc-package field and a 
% NOTES field is present, the fbc-package value will be used (e.g. CHARGE for 
% metabolites, or GENE_ASSOCIATION for reactions). The same applies to annotations, 
% i.e. if there is an annotation for an EC number, the Notes field EC Number will 
% be ignored. However, the charge field in SBML Level 2 will be overwritten by 
% the Notes field definitions.
% 
% 
%% *SimPheny Format*
% SimPheny models provide their models in 3 or 4 files (4 if GPR rules are provided). 
% The model identifiers will be used as presented in the SimPheny files.
% 
% 
%% Excel Format
% Excel files adhereing to the COBRA xls specifications listed in the <https://opencobra.github.io/cobratoolbox/docs/ExcelModelFileDefinition.html 
% Documentation>. Parseable Excel models contain two sheets for reactions and 
% metabolites respectively.
% 
% 
%% Available output formats
% The COBRA Toolbox also allows storage in multiple file types as detailed below:
%% MATLAB |.mat| files
% This format is simply the model being saved as a MATLAB save file, and is 
% the default save method. It has the advantage of lossless data storage even 
% for model specific fields not supported by The COBRA Toolbox.
%% SBML format (|.xml|)
% The systems biology markup language (SBML) is a very common format to store 
% biological models. The COBRA Toolbox allows generation of models using Level 
% 3 Version 1 and uses the fbc-package extension to encode constraint based properties. 
% This is the format that is recommended for publication, as it can be used by 
% many different tools and allows the best use of the model.
%% Excel format
% Historically, models were often exchanged using Excel files, and this is still 
% in use today. Some users prefer to get an overview over a model using Excel, 
% since it provides a general overview at a first glance. The COBRA Toolbox offers 
% an Excel export using the format described in the Documentation (see above).
%% Text Format
% Finally The COBRA Toolbox offers a simple textual export, which is essentially 
% a tab separated file containing the reactions with their reaction formulas along 
% with the associated GPRs, but no further information. This format only uses 
% the required fields and will ignore any optional fields.
% 
% 
%% MATERIALS
% We will use two model files for this tutorial, one MATLAB |.mat| file and 
% an |.xml| file stored in SBML format. The following code loads these files into 
% the tutorial directory (cleaning any old copies).

cd(fileparts(which('tutorial_IO.mlx')));

% Copy two files that can be loaded (if they are nto yet present).
try
    delete 'ecoli_core_model.mat';
    delete 'Abiotrophia_defectiva_ATCC_49176.xml'
    copyfile(which('ecoli_core_model.mat'), '.');
    copyfile(which('Abiotrophia_defectiva_ATCC_49176.xml'), '.');
end
%% PROCEDURE
% The time it takes to load a model depends on the file format and the complexity 
% of a model. While |.mat| file loading even for large models is a question of 
% seconds, very large SBML files can take a few minutes to load depending on the 
% machine. 
%% Reading a model (TIMING 1s to a few minutes)
% The most straightforward way to import a model into the The COBRA Toolbox 
% is to use the |readCbModel| function. To e.g. load a model from a |.mat| file, 
% you can simply use the filename (with or without file extension). 

fileName = 'ecoli_core_model';
model = readCbModel(fileName);
%% 
% |readCbModel| assumes, that .mat files are a MATLAB save file, |.xml| 
% files are models in SBML format, |.sto| are SimPheny models, and |.xls| or |.xlsx| 
% are models in Excel format.

% This code is to avoid execution in non gui-environments
if usejava('desktop')
%% 
% You can also call the function without a fileName to get a file selection 
% dialog   

model = readCbModel();
%% 
% The model loaded in this way can directly be used with The COBRA Toolbox 
% functions. You can view the data stored in the model by e.g. using

open model

% This code is to avoid execution in non gui-environments
end
%% 
% 
%% Writing a model (TIMING: 1s to a few minutes)

% This code is to avoid execution in non gui-environments
if usejava('desktop')
%% 
% To write files, use the |writeCbModel| function. The function can be called 
% directly with a model.

writeCbModel(model)
%% 
% This will call a file selection dialog, which allows the selection of 
% a filename and, depending on the selected format from the dropdown, the output 
% will be generated. 

% This code is to avoid execution in non gui-environments
end
% This code is to avoid execution in non gui-environments
if usejava('desktop')
%% 
% If no |fileName| is provided, a popup will ask you to provide a |fileName| 
% with the specified format. 

writeCbModel(model,'text')
%% 
% The available format options are:
% 
% * '|mat' |- for a MATLAB save file
% * |'sbml'| - for a SBML model
% * |'xls'| - for a model in Excel format
% * |'text'| - for a textual export.

% This code is to avoid execution in non gui-environments
end
%% 
% It is also possible to specify the format and filename explicitly:

writeCbModel(model, 'SBML', 'Acidaminococcus.xml')
%% 
% which will write the model to the file Acidaminococcus.xml.

% Some Cleanup 
currentDir = pwd;
cd(fileparts(which('tutorial_IO.mlx')));

% Copy two files that can be loaded (if they are nto yet present).
try
    delete('ecoli_core_model.mat');
    delete('Abiotrophia_defectiva_ATCC_49176.xml');
    delete('Acidaminococcus.xml');
end
cd(currentDir)
##### SOURCE END #####
--></body></html>